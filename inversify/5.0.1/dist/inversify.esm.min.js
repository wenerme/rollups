var n="inversify:tagged",t="inversify:tagged_props",e="inversify:paramtypes",i=Object.freeze({__proto__:null,NAMED_TAG:"named",NAME_TAG:"name",UNMANAGED_TAG:"unmanaged",OPTIONAL_TAG:"optional",INJECT_TAG:"inject",MULTI_INJECT_TAG:"multi_inject",TAGGED:n,TAGGED_PROP:t,PARAM_TYPES:e,DESIGN_PARAM_TYPES:"design:paramtypes",POST_CONSTRUCT:"post_construct"}),r={Request:"Request",Singleton:"Singleton",Transient:"Transient"},o={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},a={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},u=0;function c(){return u++}var s=function(){function n(n,t){this.id=c(),this.activated=!1,this.serviceIdentifier=n,this.scope=t,this.type=o.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return n.prototype.clone=function(){var t=new n(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},n}(),h=function(){function i(){}return i.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(e,t),userGeneratedMetadata:Reflect.getMetadata(n,t)||{}}},i.prototype.getPropertiesMetadata=function(n){return Reflect.getMetadata(t,n)||[]},i}(),d=2,f=0,p=1;function l(n){return n instanceof RangeError||"Maximum call stack size exceeded"===n.message}function g(n){return"function"==typeof n?n.name:"symbol"==typeof n?n.toString():n}function y(n,t,e){var i="",r=e(n,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(n){var t="Object";null!==n.implementationType&&(t=v(n.implementationType)),i=i+"\n "+t,n.constraint.metaData&&(i=i+" - "+n.constraint.metaData)}))),i}function m(n){n.childRequests.forEach((function(n){if(function n(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||n(t.parentRequest,e))}(n,n.serviceIdentifier)){var t=function(n){return function n(t,e){void 0===e&&(e=[]);var i=g(t.serviceIdentifier);return e.push(i),null!==t.parentRequest?n(t.parentRequest,e):e}(n).reverse().join(" --\x3e ")}(n);throw new Error("Circular dependency found: "+t)}m(n)}))}function v(n){if(n.name)return n.name;var t=n.toString(),e=t.match(/^function\s*([^\s(]+)/);return e?e[1]:"Anonymous function: "+t}var b=function(){function n(n){this.id=c(),this.container=n}return n.prototype.addPlan=function(n){this.plan=n},n.prototype.setCurrentRequest=function(n){this.currentRequest=n},n}(),w=function(){function n(n,t){this.key=n,this.value=t}return n.prototype.toString=function(){return"named"===this.key?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},n}(),_=function(n,t){this.parentContext=n,this.rootRequest=t};function A(n,t,e,i){I("inversify:tagged",n,t,i,e)}function T(n,t,e){I("inversify:tagged_props",n.constructor,t,e)}function I(n,t,e,i,r){var o={},a="number"==typeof r,u=void 0!==r&&a?r.toString():e;if(a&&void 0!==e)throw new Error("The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.");Reflect.hasOwnMetadata(n,t)&&(o=Reflect.getMetadata(n,t));var c=o[u];if(Array.isArray(c))for(var s=0,h=c;s<h.length;s++){var d=h[s];if(d.key===i.key)throw new Error("Metadata key was used more than once in a parameter: "+d.key.toString())}else c=[];c.push(i),o[u]=c,Reflect.defineMetadata(n,o,t)}function S(n,t){Reflect.decorate(n,t)}function C(n,t){return function(e,i){t(e,i,n)}}function N(n,t,e){"number"==typeof e?S([C(e,n)],t):"string"==typeof e?Reflect.decorate([n],t,e):S([n],t)}var R=function(){function n(n){this._cb=n}return n.prototype.unwrap=function(){return this._cb()},n}();function x(n){return function(t,e,i){if(void 0===n)throw new Error("@inject called with undefined this could mean that the class "+t.name+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.");var r=new w("inject",n);"number"==typeof i?A(t,e,i,r):T(t,e,r)}}var E=function(){function n(n){this.str=n}return n.prototype.startsWith=function(n){return 0===this.str.indexOf(n)},n.prototype.endsWith=function(n){var t,e=n.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},e)},n.prototype.contains=function(n){return-1!==this.str.indexOf(n)},n.prototype.equals=function(n){return this.str===n},n.prototype.value=function(){return this.str},n}(),j=function(){function n(n,t,e,i){this.id=c(),this.type=n,this.serviceIdentifier=e,this.name=new E(t||""),this.metadata=new Array;var r=null;"string"==typeof i?r=new w("named",i):i instanceof w&&(r=i),null!==r&&this.metadata.push(r)}return n.prototype.hasTag=function(n){for(var t=0,e=this.metadata;t<e.length;t++){if(e[t].key===n)return!0}return!1},n.prototype.isArray=function(){return this.hasTag("multi_inject")},n.prototype.matchesArray=function(n){return this.matchesTag("multi_inject")(n)},n.prototype.isNamed=function(){return this.hasTag("named")},n.prototype.isTagged=function(){return this.metadata.some((function(n){return"inject"!==n.key&&"multi_inject"!==n.key&&"name"!==n.key&&"unmanaged"!==n.key&&"named"!==n.key}))},n.prototype.isOptional=function(){return this.matchesTag("optional")(!0)},n.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(n){return"named"===n.key}))[0]:null},n.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(n){return"inject"!==n.key&&"multi_inject"!==n.key&&"name"!==n.key&&"unmanaged"!==n.key&&"named"!==n.key})):null},n.prototype.matchesNamedTag=function(n){return this.matchesTag("named")(n)},n.prototype.matchesTag=function(n){var t=this;return function(e){for(var i=0,r=t.metadata;i<r.length;i++){var o=r[i];if(o.key===n&&o.value===e)return!0}return!1}},n}();function M(n,t,e,i){var r=n.getConstructorMetadata(e),o=r.compilerGeneratedMetadata;if(void 0===o)throw new Error("Missing required @injectable annotation in: "+t+".");var u=r.userGeneratedMetadata,c=Object.keys(u),s=function(n,t,e,i,r){for(var o=[],a=0;a<r;a++){var u=k(a,n,t,e,i);null!==u&&o.push(u)}return o}(i,t,o,u,0===e.length&&c.length>0?c.length:e.length),h=function n(t,e){for(var i=t.getPropertiesMetadata(e),r=[],o=Object.keys(i),u=0,c=o;u<c.length;u++){var s=c[u],h=i[s],d=q(i[s]),f=d.targetName||s,p=d.inject||d.multiInject,l=new j(a.ClassProperty,f,p);l.metadata=h,r.push(l)}var g=Object.getPrototypeOf(e.prototype).constructor;if(g!==Object){var y=n(t,g);r=r.concat(y)}return r}(n,e);return s.concat(h)}function k(n,t,e,i,r){var o=r[n.toString()]||[],u=q(o),c=!0!==u.unmanaged,s=i[n],h=u.inject||u.multiInject;if((s=h||s)instanceof R&&(s=s.unwrap()),c){if(!t&&(s===Object||s===Function||void 0===s))throw new Error("Missing required @inject or @multiInject annotation in: argument "+n+" in class "+e+".");var d=new j(a.ConstructorArgument,u.targetName,s);return d.metadata=o,d}return null}function q(n){var t={};return n.forEach((function(n){t[n.key.toString()]=n.value})),{inject:t.inject,multiInject:t.multi_inject,targetName:t.name,unmanaged:t.unmanaged}}var P=function(){function n(n,t,e,i,r){this.id=c(),this.serviceIdentifier=n,this.parentContext=t,this.parentRequest=e,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===e?new Map:null}return n.prototype.addChildRequest=function(t,e,i){var r=new n(t,this.parentContext,this,e,i);return this.childRequests.push(r),r},n}();function W(n){return n._bindingDictionary}function D(n,t,e,i,r){var o=O(e.container,r.serviceIdentifier),a=[];return o.length===f&&e.container.options.autoBindInjectable&&"function"==typeof r.serviceIdentifier&&n.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(e.container.bind(r.serviceIdentifier).toSelf(),o=O(e.container,r.serviceIdentifier)),a=t?o:o.filter((function(n){var t=new P(n.serviceIdentifier,e,i,n,r);return n.constraint(t)})),function(n,t,e,i){switch(t.length){case f:if(e.isOptional())return t;var r=g(n),o="No matching bindings found for serviceIdentifier:";throw o+=function(n,t){if(t.isTagged()||t.isNamed()){var e="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(e+=i.toString()+"\n"),null!==r&&r.forEach((function(n){e+=n.toString()+"\n"}))," "+n+"\n "+n+" - "+e}return" "+n}(r,e),o+=y(i,r,O),new Error(o);case p:if(!e.isArray())return t;case d:default:if(e.isArray())return t;o="Ambiguous match found for serviceIdentifier: "+(r=g(n));throw o+=y(i,r,O),new Error(o)}}(r.serviceIdentifier,a,r,e.container),a}function F(n,t,e,i,r,a){var u,c;if(null===r){u=D(n,t,i,null,a),c=new P(e,i,null,u,a);var s=new _(i,c);i.addPlan(s)}else u=D(n,t,i,r,a),c=r.addChildRequest(a.serviceIdentifier,u,a);u.forEach((function(t){var e=null;if(a.isArray())e=c.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;e=c}if(t.type===o.Instance&&null!==t.implementationType){var r=function(n,t){return M(n,v(t),t,!1)}(n,t.implementationType);if(!i.container.options.skipBaseClassChecks){var u=function n(t,e){var i=Object.getPrototypeOf(e.prototype).constructor;if(i!==Object){var r=M(t,v(i),i,!0),o=r.map((function(n){return n.metadata.filter((function(n){return"unmanaged"===n.key}))})),a=[].concat.apply([],o).length,u=r.length-a;return u>0?u:n(t,i)}return 0}(n,t.implementationType);if(r.length<u){var s=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return"The number of constructor arguments in the derived class "+n[0]+" must be >= than the number of constructor arguments of its base class."}(v(t.implementationType));throw new Error(s)}}r.forEach((function(t){F(n,!1,t.serviceIdentifier,i,e,t)}))}}))}function O(n,t){var e=[],i=W(n);return i.hasKey(t)?e=i.get(t):null!==n.parent&&(e=O(n.parent,t)),e}function V(n,t,e,i,r,o,a,u){void 0===u&&(u=!1);var c=new b(t),s=function(n,t,e,i,r,o){var a=new w(n?"multi_inject":"inject",e),u=new j(t,i,e,a);if(void 0!==r){var c=new w(r,o);u.metadata.push(c)}return u}(e,i,r,"",o,a);try{return F(n,u,r,c,null,s),c}catch(n){throw l(n)&&c.plan&&m(c.plan.rootRequest),n}}function B(n,t,e){var i,r,o=null;if(t.length>0){var u=t.filter((function(n){return null!==n.target&&n.target.type===a.ConstructorArgument})).map(e);r=u,o=function(n,t,e){var i=t.filter((function(n){return null!==n.target&&n.target.type===a.ClassProperty})),r=i.map(e);return i.forEach((function(t,e){var i;i=t.target.name.value();var o=r[e];n[i]=o})),n}(o=new((i=n).bind.apply(i,[void 0].concat(r))),t,e)}else o=new n;return function(n,t){if(Reflect.hasMetadata("post_construct",n)){var e=Reflect.getMetadata("post_construct",n);try{t[e.value]()}catch(t){throw new Error(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return"@postConstruct error in class "+n[0]+": "+n[1]}(n.name,t.message))}}}(n,o),o}var G=function(n,t,e){try{return e()}catch(e){throw l(e)?new Error(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+n[0]+"' bindings. Please investigate bindings withservice identifier '"+n[1]+"'."}(n,t.toString())):e}},L=function(n){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,i=t.childRequests,a=t.target&&t.target.isArray(),u=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(a&&u)return i.map((function(t){return L(n)(t)}));var c=null;if(!t.target.isOptional()||0!==e.length){var s=e[0],h=s.scope===r.Singleton,d=s.scope===r.Request;if(h&&s.activated)return s.cache;if(d&&null!==n&&n.has(s.id))return n.get(s.id);if(s.type===o.ConstantValue)c=s.cache;else if(s.type===o.Function)c=s.cache;else if(s.type===o.Constructor)c=s.implementationType;else if(s.type===o.DynamicValue&&null!==s.dynamicValue)c=G("toDynamicValue",s.serviceIdentifier,(function(){return s.dynamicValue(t.parentContext)}));else if(s.type===o.Factory&&null!==s.factory)c=G("toFactory",s.serviceIdentifier,(function(){return s.factory(t.parentContext)}));else if(s.type===o.Provider&&null!==s.provider)c=G("toProvider",s.serviceIdentifier,(function(){return s.provider(t.parentContext)}));else{if(s.type!==o.Instance||null===s.implementationType){var f=g(t.serviceIdentifier);throw new Error("Invalid binding type: "+f)}c=B(s.implementationType,i,L(n))}return"function"==typeof s.onActivation&&(c=s.onActivation(t.parentContext,c)),h&&(s.cache=c,s.activated=!0),d&&null!==n&&!n.has(s.id)&&n.set(s.id,c),c}}};var U=function(n,t){var e=n.parentRequest;return null!==e&&(!!t(e)||U(e,t))},K=function(n){return function(t){var e=function(e){return null!==e&&null!==e.target&&e.target.matchesTag(n)(t)};return e.metaData=new w(n,t),e}},z=K("named"),H=function(n){return function(t){var e=null;if(null!==t){if(e=t.bindings[0],"string"==typeof n)return e.serviceIdentifier===n;var i=t.bindings[0].implementationType;return n===i}return!1}},Y=function(){function n(n){this._binding=n}return n.prototype.when=function(n){return this._binding.constraint=n,new J(this._binding)},n.prototype.whenTargetNamed=function(n){return this._binding.constraint=z(n),new J(this._binding)},n.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(n){return null!==n.target&&!n.target.isNamed()&&!n.target.isTagged()},new J(this._binding)},n.prototype.whenTargetTagged=function(n,t){return this._binding.constraint=K(n)(t),new J(this._binding)},n.prototype.whenInjectedInto=function(n){return this._binding.constraint=function(t){return H(n)(t.parentRequest)},new J(this._binding)},n.prototype.whenParentNamed=function(n){return this._binding.constraint=function(t){return z(n)(t.parentRequest)},new J(this._binding)},n.prototype.whenParentTagged=function(n,t){return this._binding.constraint=function(e){return K(n)(t)(e.parentRequest)},new J(this._binding)},n.prototype.whenAnyAncestorIs=function(n){return this._binding.constraint=function(t){return U(t,H(n))},new J(this._binding)},n.prototype.whenNoAncestorIs=function(n){return this._binding.constraint=function(t){return!U(t,H(n))},new J(this._binding)},n.prototype.whenAnyAncestorNamed=function(n){return this._binding.constraint=function(t){return U(t,z(n))},new J(this._binding)},n.prototype.whenNoAncestorNamed=function(n){return this._binding.constraint=function(t){return!U(t,z(n))},new J(this._binding)},n.prototype.whenAnyAncestorTagged=function(n,t){return this._binding.constraint=function(e){return U(e,K(n)(t))},new J(this._binding)},n.prototype.whenNoAncestorTagged=function(n,t){return this._binding.constraint=function(e){return!U(e,K(n)(t))},new J(this._binding)},n.prototype.whenAnyAncestorMatches=function(n){return this._binding.constraint=function(t){return U(t,n)},new J(this._binding)},n.prototype.whenNoAncestorMatches=function(n){return this._binding.constraint=function(t){return!U(t,n)},new J(this._binding)},n}(),J=function(){function n(n){this._binding=n}return n.prototype.onActivation=function(n){return this._binding.onActivation=n,new Y(this._binding)},n}(),Q=function(){function n(n){this._binding=n,this._bindingWhenSyntax=new Y(this._binding),this._bindingOnSyntax=new J(this._binding)}return n.prototype.when=function(n){return this._bindingWhenSyntax.when(n)},n.prototype.whenTargetNamed=function(n){return this._bindingWhenSyntax.whenTargetNamed(n)},n.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},n.prototype.whenTargetTagged=function(n,t){return this._bindingWhenSyntax.whenTargetTagged(n,t)},n.prototype.whenInjectedInto=function(n){return this._bindingWhenSyntax.whenInjectedInto(n)},n.prototype.whenParentNamed=function(n){return this._bindingWhenSyntax.whenParentNamed(n)},n.prototype.whenParentTagged=function(n,t){return this._bindingWhenSyntax.whenParentTagged(n,t)},n.prototype.whenAnyAncestorIs=function(n){return this._bindingWhenSyntax.whenAnyAncestorIs(n)},n.prototype.whenNoAncestorIs=function(n){return this._bindingWhenSyntax.whenNoAncestorIs(n)},n.prototype.whenAnyAncestorNamed=function(n){return this._bindingWhenSyntax.whenAnyAncestorNamed(n)},n.prototype.whenAnyAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(n,t)},n.prototype.whenNoAncestorNamed=function(n){return this._bindingWhenSyntax.whenNoAncestorNamed(n)},n.prototype.whenNoAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenNoAncestorTagged(n,t)},n.prototype.whenAnyAncestorMatches=function(n){return this._bindingWhenSyntax.whenAnyAncestorMatches(n)},n.prototype.whenNoAncestorMatches=function(n){return this._bindingWhenSyntax.whenNoAncestorMatches(n)},n.prototype.onActivation=function(n){return this._bindingOnSyntax.onActivation(n)},n}(),X=function(){function n(n){this._binding=n}return n.prototype.inRequestScope=function(){return this._binding.scope=r.Request,new Q(this._binding)},n.prototype.inSingletonScope=function(){return this._binding.scope=r.Singleton,new Q(this._binding)},n.prototype.inTransientScope=function(){return this._binding.scope=r.Transient,new Q(this._binding)},n}(),Z=function(){function n(n){this._binding=n,this._bindingWhenSyntax=new Y(this._binding),this._bindingOnSyntax=new J(this._binding),this._bindingInSyntax=new X(n)}return n.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},n.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},n.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},n.prototype.when=function(n){return this._bindingWhenSyntax.when(n)},n.prototype.whenTargetNamed=function(n){return this._bindingWhenSyntax.whenTargetNamed(n)},n.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},n.prototype.whenTargetTagged=function(n,t){return this._bindingWhenSyntax.whenTargetTagged(n,t)},n.prototype.whenInjectedInto=function(n){return this._bindingWhenSyntax.whenInjectedInto(n)},n.prototype.whenParentNamed=function(n){return this._bindingWhenSyntax.whenParentNamed(n)},n.prototype.whenParentTagged=function(n,t){return this._bindingWhenSyntax.whenParentTagged(n,t)},n.prototype.whenAnyAncestorIs=function(n){return this._bindingWhenSyntax.whenAnyAncestorIs(n)},n.prototype.whenNoAncestorIs=function(n){return this._bindingWhenSyntax.whenNoAncestorIs(n)},n.prototype.whenAnyAncestorNamed=function(n){return this._bindingWhenSyntax.whenAnyAncestorNamed(n)},n.prototype.whenAnyAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(n,t)},n.prototype.whenNoAncestorNamed=function(n){return this._bindingWhenSyntax.whenNoAncestorNamed(n)},n.prototype.whenNoAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenNoAncestorTagged(n,t)},n.prototype.whenAnyAncestorMatches=function(n){return this._bindingWhenSyntax.whenAnyAncestorMatches(n)},n.prototype.whenNoAncestorMatches=function(n){return this._bindingWhenSyntax.whenNoAncestorMatches(n)},n.prototype.onActivation=function(n){return this._bindingOnSyntax.onActivation(n)},n}(),$=function(){function n(n){this._binding=n}return n.prototype.to=function(n){return this._binding.type=o.Instance,this._binding.implementationType=n,new Z(this._binding)},n.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var n=this._binding.serviceIdentifier;return this.to(n)},n.prototype.toConstantValue=function(n){return this._binding.type=o.ConstantValue,this._binding.cache=n,this._binding.dynamicValue=null,this._binding.implementationType=null,new Q(this._binding)},n.prototype.toDynamicValue=function(n){return this._binding.type=o.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=n,this._binding.implementationType=null,new Z(this._binding)},n.prototype.toConstructor=function(n){return this._binding.type=o.Constructor,this._binding.implementationType=n,new Q(this._binding)},n.prototype.toFactory=function(n){return this._binding.type=o.Factory,this._binding.factory=n,new Q(this._binding)},n.prototype.toFunction=function(n){if("function"!=typeof n)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(n);return this._binding.type=o.Function,t},n.prototype.toAutoFactory=function(n){return this._binding.type=o.Factory,this._binding.factory=function(t){return function(){return t.container.get(n)}},new Q(this._binding)},n.prototype.toProvider=function(n){return this._binding.type=o.Provider,this._binding.provider=n,new Q(this._binding)},n.prototype.toService=function(n){this.toDynamicValue((function(t){return t.container.get(n)}))},n}(),nn=function(){function n(){}return n.of=function(t,e){var i=new n;return i.bindings=t,i.middleware=e,i},n}(),tn=function(){function n(){this._map=new Map}return n.prototype.getMap=function(){return this._map},n.prototype.add=function(n,t){if(null==n)throw new Error("NULL argument");if(null==t)throw new Error("NULL argument");var e=this._map.get(n);void 0!==e?(e.push(t),this._map.set(n,e)):this._map.set(n,[t])},n.prototype.get=function(n){if(null==n)throw new Error("NULL argument");var t=this._map.get(n);if(void 0!==t)return t;throw new Error("Key Not Found")},n.prototype.remove=function(n){if(null==n)throw new Error("NULL argument");if(!this._map.delete(n))throw new Error("Key Not Found")},n.prototype.removeByCondition=function(n){var t=this;this._map.forEach((function(e,i){var r=e.filter((function(t){return!n(t)}));r.length>0?t._map.set(i,r):t._map.delete(i)}))},n.prototype.hasKey=function(n){if(null==n)throw new Error("NULL argument");return this._map.has(n)},n.prototype.clone=function(){var t=new n;return this._map.forEach((function(n,e){n.forEach((function(n){return t.add(e,n.clone())}))})),t},n.prototype.traverse=function(n){this._map.forEach((function(t,e){n(e,t)}))},n}(),en=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function u(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){n.done?r(n.value):new e((function(t){t(n.value)})).then(a,u)}c((i=i.apply(n,t||[])).next())}))},rn=function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(n,a)}catch(n){o=[6,n],i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},on=function(){function n(n){var t=n||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=r.Transient;else if(t.defaultScope!==r.Singleton&&t.defaultScope!==r.Transient&&t.defaultScope!==r.Request)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=c(),this._bindingDictionary=new tn,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new h}return n.merge=function(t,e){var i=new n,r=W(i),o=W(t),a=W(e);function u(n,t){n.traverse((function(n,e){e.forEach((function(n){t.add(n.serviceIdentifier,n.clone())}))}))}return u(o,r),u(a,r),i},n.prototype.load=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=this._getContainerModuleHelpersFactory(),i=0,r=n;i<r.length;i++){var o=r[i],a=e(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},n.prototype.loadAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return en(this,void 0,void 0,(function(){var t,e,i,r,o;return rn(this,(function(a){switch(a.label){case 0:t=this._getContainerModuleHelpersFactory(),e=0,i=n,a.label=1;case 1:return e<i.length?(r=i[e],o=t(r.id),[4,r.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},n.prototype.unload=function(){for(var n=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=function(n){return function(t){return t.moduleId===n}};t.forEach((function(t){var e=i(t.id);n._bindingDictionary.removeByCondition(e)}))},n.prototype.bind=function(n){var t=this.options.defaultScope||r.Transient,e=new s(n,t);return this._bindingDictionary.add(n,e),new $(e)},n.prototype.rebind=function(n){return this.unbind(n),this.bind(n)},n.prototype.unbind=function(n){try{this._bindingDictionary.remove(n)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+g(n))}},n.prototype.unbindAll=function(){this._bindingDictionary=new tn},n.prototype.isBound=function(n){var t=this._bindingDictionary.hasKey(n);return!t&&this.parent&&(t=this.parent.isBound(n)),t},n.prototype.isBoundNamed=function(n,t){return this.isBoundTagged(n,"named",t)},n.prototype.isBoundTagged=function(n,t,e){var i=!1;if(this._bindingDictionary.hasKey(n)){var r=this._bindingDictionary.get(n),o=function(n,t,e,i){var r=new j(a.Variable,"",t,new w(e,i)),o=new b(n);return new P(t,o,null,[],r)}(this,n,t,e);i=r.some((function(n){return n.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(n,t,e)),i},n.prototype.snapshot=function(){this._snapshots.push(nn.of(this._bindingDictionary.clone(),this._middleware))},n.prototype.restore=function(){var n=this._snapshots.pop();if(void 0===n)throw new Error("No snapshot available to restore.");this._bindingDictionary=n.bindings,this._middleware=n.middleware},n.prototype.createChild=function(t){var e=new n(t||this.options);return e.parent=this,e},n.prototype.applyMiddleware=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=this._middleware?this._middleware:this._planAndResolve();this._middleware=n.reduce((function(n,t){return t(n)}),e)},n.prototype.applyCustomMetadataReader=function(n){this._metadataReader=n},n.prototype.get=function(n){return this._get(!1,!1,a.Variable,n)},n.prototype.getTagged=function(n,t,e){return this._get(!1,!1,a.Variable,n,t,e)},n.prototype.getNamed=function(n,t){return this.getTagged(n,"named",t)},n.prototype.getAll=function(n){return this._get(!0,!0,a.Variable,n)},n.prototype.getAllTagged=function(n,t,e){return this._get(!1,!0,a.Variable,n,t,e)},n.prototype.getAllNamed=function(n,t){return this.getAllTagged(n,"named",t)},n.prototype.resolve=function(n){var t=this.createChild();return t.bind(n).toSelf(),t.get(n)},n.prototype._getContainerModuleHelpersFactory=function(){var n=this,t=function(n,t){n._binding.moduleId=t},e=function(e){return function(i){var r=n.rebind.bind(n)(i);return t(r,e),r}};return function(i){return{bindFunction:(r=i,function(e){var i=n.bind.bind(n)(e);return t(i,r),i}),isboundFunction:function(t){return n.isBound.bind(n)(t)},rebindFunction:e(i),unbindFunction:function(t){n.unbind.bind(n)(t)}};var r}},n.prototype._get=function(n,t,e,i,r,o){var a=null,u={avoidConstraints:n,contextInterceptor:function(n){return n},isMultiInject:t,key:r,serviceIdentifier:i,targetType:e,value:o};if(this._middleware){if(null==(a=this._middleware(u)))throw new Error("Invalid return type in middleware. Middleware must return!")}else a=this._planAndResolve()(u);return a},n.prototype._planAndResolve=function(){var n=this;return function(t){var e=V(n._metadataReader,n,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(n){return L(n.plan.rootRequest.requestScope)(n.plan.rootRequest)}(e=t.contextInterceptor(e))}},n}(),an=function(n){this.id=c(),this.registry=n},un=function(n){this.id=c(),this.registry=n};function cn(){return function(n){if(Reflect.hasOwnMetadata(e,n))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata("design:paramtypes",n)||[];return Reflect.defineMetadata(e,t,n),n}}function sn(n,t){return function(e,i,r){var o=new w(n,t);"number"==typeof r?A(e,i,r,o):T(e,i,o)}}function hn(n){return function(t,e,i){var r=new w("named",n);"number"==typeof i?A(t,e,i,r):T(t,e,r)}}function dn(){return function(n,t,e){var i=new w("optional",!0);"number"==typeof e?A(n,t,e,i):T(n,t,i)}}function fn(){return function(n,t,e){A(n,t,e,new w("unmanaged",!0))}}function pn(n){return function(t,e,i){var r=new w("multi_inject",n);"number"==typeof i?A(t,e,i,r):T(t,e,r)}}function ln(n){return function(t,e,i){A(t,e,i,new w("name",n))}}function gn(){return function(n,t,e){var i=new w("post_construct",t);if(Reflect.hasOwnMetadata("post_construct",n.constructor))throw new Error("Cannot apply @postConstruct decorator multiple times in the same class");Reflect.defineMetadata("post_construct",i,n.constructor)}}var yn=function(n){return function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.forEach((function(e){return n.bind(e).toService(t)}))}}},mn=i;export{un as AsyncContainerModule,r as BindingScopeEnum,o as BindingTypeEnum,on as Container,an as ContainerModule,R as LazyServiceIdentifer,mn as METADATA_KEY,h as MetadataReader,a as TargetTypeEnum,N as decorate,g as getServiceIdentifierAsString,c as id,x as inject,cn as injectable,yn as multiBindToService,pn as multiInject,hn as named,z as namedConstraint,dn as optional,gn as postConstruct,sn as tagged,K as taggedConstraint,ln as targetName,U as traverseAncerstors,H as typeConstraint,fn as unmanaged};
//# sourceMappingURL=inversify.esm.min.js.map
